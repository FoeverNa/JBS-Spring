# day14

## 히스토리 

- 아파치라는 단체는 자바를 이용해서 온갖일을 많이한다
  - 자바는 처음나왔을때 유명하지 않았다
  - 선이라는 네트워크 장비파는 곳에서 자바를 개발했다
    - 그당시에 모든하드웨어들이 네트워크로연결이 되있을때 사용할 프로그래밍 언어를개발해보자 - 대단해
    - 그래서 배포했더니 c++보다 느리고 문법도새로워서 안쓰섯음
  - 그때 아파치애들이 자바좀쓰게해조라 했음 무료료
    - 그대신 만드는것 모두 무료로 공유해라. 이게 오픈소스에 시초래
  - 그러다 선이망하고 오라클에 팔림
    - iBATIS 프레임웤이  2001년도에 발표됨
      - JDBC에 지쳤던 사람들이 열광하며 그리로 넘어왔다
    - 문제는 2009년도에 선이 팔리면서 오라클에서 아파치에게 압박을 함
      - 2010년도부터 아파치 개발자들이 탈퇴하기 시작함
        - 이때 아이바티스 개발자들도 탈퇴해서 구글로넘어감
          - 그리고 그걸 마이바티스라고 이름을바꿈
            - 그래서 아이바티스는 2.2에서 끝나고 마이바티스는 2.3에서 버전이 시작한다
      - 그사이에 스프링 프레임웤이 2005년도에 발표가 된다
        - 스프링은 아이바티스보다 나중에 등장해서 후발주자인 Spring이 연동에필요한 api를 제공해야한다
        - 마이바티스 쪽에서 연동에 필요한 것들을 제공한다.
          - 이런 히스토리 기억하면 왜이렇게 개발됬는지 알수있따
- 우리는 마이바티스 3.0을 라이브러리를 넣는데도 임포트는 아이바티스 패키지를 가져다 쓴다

## PPT자료 -마이타비스 프레임웤 구조

- SQL Map이 마이바티스 컨테이너(공식 이름)
  - 얘가 SQL Session 객체라고 이해하면 이해하기 편한다
    - 얘를 생성하려면 factory에서 session객체하나를 가져온다
    - 그때 main xml환경설정 읽는다
      - 1)datasoruce
      - 2)어떤 sql문과 매핑되어있는지
        - 적어도 테이블별로 하나씩은 mapping.xml이 등록이 된다
          - 이때  서로다른 xml에서 iid가 겹치면 충돌이 발생한다
          - 그래서 namespace를 설정한 것이다
    - 내부적으로 JDBC를 이용하여 DB와 연결한다
      - 마이바티스 컨테이너가 알아서 해준다

- gettotalCount 작성하고 resutlType을 int로 해준다 0 > 기본형으로도 매핑이가능하다
  - 이런 일반적인 이름은 겹칠 가능성이 커서 유니크한 아이디가 필요한데 그걸 namespace로한다
- boadmapping에 sql이 6개의 태그가 있는데 설정파일읽으면 컨테이너(SQLMap)에 총 6개의 객체생성한다(MappedStatemen)
  - 이객체들을 id로 구별한다.=> 그래서 유니크한 id를 설정하는게 중요하다
  - insert를 하면 mappedStatemen 중에 id가 insertBoard인 객체 찾아서 객체안에 insertsql문을 찾음
    - 근데 Parameter type이란 속성으로 세팅한 parameter Object를 받는다
      - sql실행할때 parameter type 객체를 넣어주는 것을 input이라고 한다
- slect는 다르다
  - 검색결과가 rs에 담기면 다시 Mapped statemen에 돌아와서 resultType에 지정한 객체를 입력받아 처리한다
    - Result Object를 output이라고 한다
  - 왜화살표가 다 안쪽으로오는가? 컨테이너가 지시하는대로 움직여야되서 다안쪽으로와야된다
    - 이걸 xml을 통해서 모두 컨테이너에게 알려주어야 한다

- 설정파일 들어갈때 어떤 객체랑 연결되는지 알게되고 어떤 파일들이 로딩될지도 안다
- sql문 하나당 하나의 mapped Statement 객체가 생성된다
  - 컨테이너가 객체들을 필요한 input/output 객체를 생성해서 넣어준다
    - parameter에는 vo, map, primitive도 많이 사용한다

- 인서트할때 vo안쓰고 맵 써보기



스프링하고 합치기]

- 유틸리티 클래스는 마이바티스가 연결해준다.. factoryBean을 그래서 옮길필요없음, 
- datasource는 스프링쪽에있는걸 공유해서 쓰면된다



MAVEN

- nuew- mave - mavenproject
- 메이븐은 프로젝트 만들고 배포하는거까지 도와주는 툴
  - 프로젝트전반에걸쳐 많은도움을 줌.
    - **중요기능 두가지**
      - 라이브러리관리
      - 프로젝트 템플릿 제공(=프로젝트 구조가 똑같다)
        -  똑같은 프로젝트 구조를 공휴아여 다른 사람들과 협업하기가 편하다
- 만들때 여러가지 템플릿이 제공됨
  - quickstart, webapp 두개를기억하면된다
  - Gropu id는 중요하다.. 어디회사에서만드는지 알여준다
  - Artifactid 는 프로젝트이름이다
  - Version은 수정가능한것
  - package는 기본적으로제공되는 패키지 -> com.rubypaper.biz



- biz. App.java 하면 기본 자바처럼 기능이 동작함
- test - >얘들이 테스트 케이스이다
  - junit 3점대라는것 확인하기
  - junit 라이브러리를 이미 다운로드해주었다

- org.apache.maven.archetype 이걸로하니까됫네

- porm.xml파일을 열기

  - junit 버전 바꾸기 -> 4.12fh

  - ArtifactID뒤에 junit-4.12.jar가 파일이름이다

    - 아디팩트아이디+파일이름합쳐서 라이브러리 다운된다

  - 3.8버전일대는 단독으로 사용되지만 4,12버전 바꾸니 햄크래스도 함게추가된다

    - 이기능이 대박인것이다. 
    - 라이브러리도 다운하지 않아도되고 관련 라이브러리도 다운받지 않아도된다
      - 심지어 junit-4.12랑 햄크래스트 1.3이랑 호환되는지도 모른다...
        - 예전엔 하나식넣어봤데....

    

maverepository - spring - springmvc - 버전은 release된거사용

- 그래들은 언어 종속되지 않고 메이븐은 자바전용
- 디펜던시 복사해서 porm.xml에 복사
  - 알아서 다올려줌
  - 4.25로바꿔도 알아서 다해줌
- Dependecy Hieracy를 누루면 라이브러리 간에 디펜던시 확인할수있다

- JDBC에서 패키지 가져오기
  - lombok라이브러리 mvnrepository에서 가져오기



- runass -maveninstall
  - target폴더에 jar파일생긴다
  - repository폴더에도 등록이 된다
    - 왜중요하냐면 협업시 프로젝트 2개를 만들어서 .jar파일만 교환하면된다
    - 인터페이스랑 vo만 jar파일로 등록해주면 사용할수가 있다

SpringWebProject



Spring MVC Project

패키지

com.rubypaper.web(3개이상 뎁스가 나와야한다)

숙제 

지금 SpringPresentationProject에 소스를 다옮기기- 라이브러들도 추가하기. - 그 프로젝트lib에서 보면서하면되겠다

- 이걸 해봐야 스프링부트로가서 자동으로해주는게 편한지를 알게된다

  

