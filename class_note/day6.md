# day6

- getboad 만들기

  

  - 꼼꼼하게 변경점 적용해주기
  - 가끔 

- updated

  

- login_proc

  - session이 왜겹치나?
  - _jpsService 에 로컬변수로 이미 선언되어있다
    - config와 context도 선언되어있다
      - seveletconfig는 로컬파라미터
      - servletcontext은 글로벌파라미터
    - 선언되고 밑에서 값을 또 넣는다
      - 파라미터는 서블릿 객체를 만들어준다
    - 그래서 그냥 쓴다 -> 내장객체라고 부른다
      - 톰캣이 알아서 생성하고 초기화한 객체, 사용만하면된다

- 나머지도 다하기..

  

  

- 새프로젝트 MVCProejct
  - JSP에서 다가지고오고 web.xml 까지
    - encodingFilter만 *.do로하기

- Model1 아키텍쳐
  - 90년대 말~ 
  - JSP와 JavaBean을 이용해서 웹화면을 구현한 것을 모델1아키텍처라고 한다
    - 1브라우저가 getBoard.jsp파일 요청하면  
      - 1) 입력정보 추출
      - 2) DB에서 연동
      - 3) 응답화면 구성
      - 자바로직과 디자인을 동시에 가지고 있어서 유지보수가 어렵다
        - java코드와 html이 뒤섞여 있어서 찾기가 어렵다
        - Java개발자가 디자인을 배워서 유지모수하던 시대가 있었다
          - 결론은 JSP에서 java로직을 분리시키는 것
    - JavaBean이 Vo, DAO라고 보면된다
      - JavaBean은 자바객체
      - Model이라고도 한다
    - 지금 가지고 있는 소스랑 똑같다



- 먼저 MVC패턴 경험해보자
  - DespatcherSevlet만들기
    - *.do에 
    - path를 구하기
  - 컨트롤러를 다옮기기
  - 서버를 껏다키면 서버 메모리가 깨긋하게 비어진다
  - getboardList.do부터 호출해야지 session을 넣어서준다
    - getboardList.jsp가 먼저하면안된다된다
  - 업데이트 후에 목록이 업데이트가 안된다
    - 세션을 갱신해줘야한다 -insert에서 getboardList.do를실행하면된다
  - getBoardList.jsp를 써야할대 .do하면 무한루프



- session에 검색결과를 저장하면 안된다. 메모리가 터져버릴 수 있다
  - 없어질 request에 담는게 좋다.
  - session에 저장할 것은 id와 권한 정도이다

- 왜 세션을 얻어서 검색결과를 담았을가 보여줄려고 그런까 jsp로가야되는것
- **상세정보 하기 랑 그외기능 구현하기**



- 프레임워크 폴더에서 jstl과 standard jar 라이브러리 추가

  - MVC

    - DisPecherServlet- Contorller
      - 자바로직
        - 입력정보 추출
        - DB연동
        - 화면 이동(네비게이션)
    - JSP - view
      - 화면구성
    - DAO, VO - Model
      - db연동할 때사용하는 객체

  - JSP프로젝트에서는 controller가 없고 섞여있었다

  - JSP와 Controller + Model의 역할을 나누었음

    

- 문제는 JSP에서 java코드 없애려고 했는데 아직도 JSP에 자바코드남아있는게 문제아니야?
  - 근데 문제가 아니다 왜? 컨트롤러의 역할은 3가지가 다이다
  - 그외에 부분들,(if, for, session에서 추출 )등은 남아 있을 수 밖에없다
    - 근데 욕심이 생긴거야.. 이런거까지 다없애고 싶다
      - 없앨수있다

- **JSP EL JSTL 로 검색해보기**

- ${board.seq} 
  - board라는 session이 있으면 .getSeq해서준다
  - 세션과 리퀘스트 에 같은 이름으로 저장되어잇으면 리퀘스트부터 검색한다.
    - 리퀘스트에 없으면 세션
  - 조건이 있다
    - board가 없어도 null이 나는게 아니라 무시한다
    - 대소문자가 틀리면 오류가 난다
      - 값은 없어도 되지만 이름은 맞아야 된다
  - EL을 사용하는 데는 라이브러리가 필요가 없다
    - 라이브러리는 JSTL을 위한것이엇음

- <%@ page language="java" contentType="text/html; charset=EUC-KR"
      pageEncoding="EUC-KR"%>
  <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
  
- 주속추가
  
- getboard에 유저 추가해줘야됨



- <c: > if와 foreach만 알면된다

- <c:if test="${user.role == 'ADMIN'}">	
  - 태그 닫아줘야함

- getboardlIst도 바꿔줌
  - jstl사용

- Controller
  - .do가 8개인데 170줄. 너무 비효율적이다. 유지보수어렵다
    - 이런 비효율제거하는데 프레임워크를 제공한다
      - 직접마무리



## 스프링

- 정신을 바짝차려야한다. 호로록하고 지나가버린다

- 라이브러리 넣고 xml파일 리소스에 넣기 폴리몰피즘 패키지 넣기

- 폴리몰피즘
  - 설명해주심
  - 자바소스코드안건드리고갈수있는게 프레임워크

### 프레임워크

- 뼈대 골격, 
- 10년된 개발자와 1년된개발자가 같은 인형을 만들면 다른것 만들수 밖에없다
- 근데 만약 B가 고장나고 A가 고쳐야되는상황이되면 A의 팔다리를 붙여버린다
  - 실제로 현업에서  유지보수 인력이 바뀌는데 인수인계가 잘안될수있따
- 그럼 똑같은 설계도가 필요하다
  - 근데 설계도를안본다 귀차느니가. 그냥 경험에 의해서 개발을 하다보면 시간이 지날수록 일관성사라진다
- 그래서 뼈대는 제공해줄테니까 니들은 살만 붙여가 프레임워크다
  - 뼈대 = 아키텍처
  - 살이 비지니스로직

### 프레임워크 의미

- 솔루션은 완제품, 프레임워크는 반제품. 
  - 비지니스로직에 집중할 수 있다

### 프레임워크 장점

- 빠른 구현 시간
- 서블릿도 일종의 프레임워크로 봐야한다
  - 우리는 서블릿 클래스하나만들지만 그걸돌리기위한 서블릿 엔진은 여러개의 클래스를가지고 실행한다
  - 내가만든건 살이고 서블릿엔진은 뼈이다
- 개발자의 역량 획일화
  - 프레임워크가 제공하는 기능사용하는거니 훨신 좋다
  - 관리자입장에선 엄청나게중요
- 검증된 아키텍처의 재사용과 일관성 유지
  - 아키텍처를 개발자가 만들지 않는다



### Java 기반의 Framework

- 오픈소스가 많다
  - 나중에 유료가 될 수 가 있다
  - 소스를 받아서 커스터마이즈할 수 있다

- 화면개발, 비지니스, 디비연도으로나눌수있다
  - 화면개발은 Spring(MVC)
    - MVC 아키텍처를 제공한다
    - 버전없안되는 Struts 망했다
  - 비지니스 컴퓨넌트
    - Spirng(IoC, AOP)
- 디비연동
  - Hibernat or Jap - ORM
    - VO객체를 관계형 DB에 자동으로 매핑한다
    - 이걸 안쓸수가 없다.. 프레임워크가 SQl을 작성해주니까
  - iBatis or Mybatis - 매핑
    - SQL명령어를 xml에 파일에 작성해야한다
    - 국내 트렌드
      - 배우기가 더쉽다
  - DB가 달라지면 함수, 기능 들 많은 것이 달라진다
    - iBatis는 그래서 다SQL바꿔주야한다
    - ORM은 설정만 바꿔주면됨 

### 스프링특징

- 가볍다

  - 라이브러리 자체가 사이즈가 작다

    - 몇 메가가 안된다

  - POJO를 이용한다

    - PLAIN OLD JAVA OBJECT

    - Not POJO를 알면 POJO를 알 수 있다

      - 클래스를 작성하는데 엄격한 규칙을 적용받는다(서블릿 같이)

        - 반대로 POJO로 구현된 클래스는 아무런 규칙이 없다.
          - 헬로월드

      - POJO로 구현된 클래스는 메모리 사용량이 매우 적은 특징을 갖는다

        - 서블릿 객체 생성시 생성되야할 여러 객체들을 생각해봐라

          

- IOC

- AOP

- 컨테이너를 제공한다 => 엄청나게 중요한 특징

  - 컨테이너는 물건을 분류하고 저장하기 위해 사용한다
  - 서블릿 컨테이너(엔진)는 객체를 생성하고 보관하는 역할을 한다
    - 

- Framework

  - 오픈소스 프레임웤

- 실습
  - 폴리모피즘4 생성, 팩토리삭제
  - xml에 등록해서 컨테이너 키면 생성됨
  - 컨테이너가 구동할때 xml에 등록된 클래스들의 객체들을 생성한다(프리로딩)
    - 레이지 로딩이 없다
  - 생성자에 매개변수를 추가하면 디폴트생성자가 없어진다
    - 그럼 컨테이너는 객체를 생성해주지 못한다 -> 서블릿이랑 똑같다



